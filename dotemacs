; Shortcut
(defalias 'yes-or-no-p 'y-or-n-p)
(defalias 'rn 'wdired-change-to-wdired-mode)
(global-set-key (kbd "C-.") 'other-window)
(global-set-key (kbd "C-x M-f" ) 'find-file-at-point)
(setq 
  bookmark-default-file "~/.emacs.d/bookmarks" ;; keep my ~/ clean
  bookmark-save-flag 1)                        ;; autosave each change

; Editing
(delete-selection-mode 1)
(set-language-environment "UTF-8")
(setq default-input-method "vietnamese-telex")

; Visual
;;(global-visual-line-mode 1)
(show-paren-mode t)
(size-indication-mode t)
(column-number-mode 1)
(global-linum-mode 1)
;;(global-whitespace-mode 1)
;; make whitespace-mode use “¶” for newline and “▷” for tab.
;; together with the rest of its defaults
(setq whitespace-display-mappings
 '(
   (space-mark 32 [183] [46]) ; normal space
   (space-mark 160 [164] [95])
   (space-mark 2208 [2212] [95])
   (space-mark 2336 [2340] [95])
   (space-mark 3616 [3620] [95])
   (space-mark 3872 [3876] [95])
   (newline-mark 10 [182 10]) ; newline
   (tab-mark 9 [9655 9] [92 9]) ; tab
))

; Interaction
(ido-mode t)
;;; Windmove mode
; Source: http://hovav.net/elisp/windmove-0.95.el
(require 'windmove)
(global-set-key (kbd "<left>") 'windmove-left)
(global-set-key (kbd "<right>") 'windmove-right)
(global-set-key (kbd "<up>") 'windmove-up)
(global-set-key (kbd "<down>") 'windmove-down)

; Major modes
(add-to-list 'auto-mode-alist '("\\.xml\\'" . nxml-mode))
(add-to-list 'load-path "~/www/mirror/html5-el/")
(eval-after-load "rng-loc"
  '(add-to-list 'rng-schema-locating-files "~/www/mirror/html5-el/schemas.xml"))
;(require 'whattf-dt)
(add-to-list 'auto-mode-alist '("\\.xhtml\\'" . nxml-mode))

(setq auto-mode-alist (append auto-mode-alist
			      '(("\\.[hg]s$"  . haskell-mode)
				("\\.hi$"     . haskell-mode)
				("\\.l[hg]s$" . literate-haskell-mode))))
(autoload 'haskell-mode "haskell-mode" "Major mode for editing Haskell scripts." t)
(autoload 'literate-haskell-mode "haskell-mode" "Major mode for editing literate Haskell scripts." t)
(autoload 'switch-to-haskell "inf-haskell" "" t)
(autoload 'inferior-haskell-load-file "inf-haskell" "" t)
(add-hook 'haskell-mode-hook 'turn-on-haskell-doc-mode)
(add-hook 'haskell-mode-hook 'turn-on-haskell-indentation)

(add-to-list 'load-path "/usr/lib/erlang/lib/tools-2.6.4/emacs/")
(autoload 'erlang-mode "erlang" "" t)
(add-to-list 'auto-mode-alist '("\\.erl\\'" . erlang-mode))
(add-to-list 'load-path "/home/lazni/www/mirror/el/distel-4.03/elisp/")
;(require 'distel)
;(distel-setup)

(setq ditaa-cmd "java -jar /usr/share/java/ditaa/ditaa0_6b.jar")
(defun djcb-ditaa-generate ()
  (interactive)
  (shell-command
    (concat ditaa-cmd " " buffer-file-name)))

;; allow for export=>beamer by placing
;; #+LaTeX_CLASS: beamer in org files
(unless (boundp 'org-export-latex-classes)
  (setq org-export-latex-classes nil))
(add-to-list 'org-export-latex-classes
  '("beamer"
     "\\documentclass[11pt]{beamer}\n
      \\mode<presentation>\n
      \\usetheme{Antibes}\n
      \\usecolortheme{lily}\n
      \\beamertemplateballitem\n
      \\setbeameroption{show notes}
      \\usepackage[utf8]{inputenc}\n
      \\usepackage[T1]{fontenc}\n
      \\usepackage{hyperref}\n
      \\usepackage{color}
      \\usepackage{listings}
      \\lstset{numbers=none,language=[ISO]C++,tabsize=4,
  frame=single,
  basicstyle=\\small,
  showspaces=false,showstringspaces=false,
  showtabs=false,
  keywordstyle=\\color{blue}\\bfseries,
  commentstyle=\\color{red},
  }\n
      \\usepackage{verbatim}\n
      \\institute{Miskatonic University, Astrology Dept.}\n          
       \\subject{RMRF}\n"

     ("\\section{%s}" . "\\section*{%s}")
     
     ("\\begin{frame}[fragile]\\frametitle{%s}"
       "\\end{frame}"
       "\\begin{frame}[fragile]\\frametitle{%s}"
       "\\end{frame}")))

;Minor modes
(add-to-list 'load-path "~/www/mirror/el/zencoding/")
(require 'zencoding-mode)
(add-hook 'sgml-mode-hook 'zencoding-mode) ;; Auto-start on any markup modes

;;; This was installed by package-install.el.
;;; This provides support for the package system and
;;; interfacing with ELPA, the package archive.
;;; Move this code earlier if you want to reference
;;; packages in your .emacs.
(when
    (load
     (expand-file-name "~/.emacs.d/elpa/package.el"))
  (package-initialize))

(yas/initialize)
(yas/load-directory "~/www/code/snippet")

(custom-set-variables
  ;; custom-set-variables was added by Custom.
  ;; If you edit it by hand, you could mess it up, so be careful.
  ;; Your init file should contain only one such instance.
  ;; If there is more than one, they won't work right.
 '(make-backup-files nil)
 '(yas/global-mode t nil (yasnippet))
 '(yas/indent-line (quote fixed))
 '(yas/prompt-functions (quote (yas/dropdown-prompt yas/x-prompt yas/completing-prompt yas/ido-prompt yas/no-prompt)))
 '(yas/root-directory "~/www/code/snippet" nil (yasnippet))
 '(yas/triggers-in-field t)
 '(yas/use-menu (quote abbreviate))
 '(yas/visit-from-menu t))

(custom-set-faces
  ;; custom-set-faces was added by Custom.
  ;; If you edit it by hand, you could mess it up, so be careful.
  ;; Your init file should contain only one such instance.
  ;; If there is more than one, they won't work right.
 )

(put 'narrow-to-region 'disabled nil)
(put 'downcase-region 'disabled nil)