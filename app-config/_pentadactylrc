" ~/.pentadactylrc

""" Start up
map <C-r> -ex rehash
set! browser.backspace_action=0
set! browser.link.open_newwindow=3
set! middlemouse.contentLoadURL=false

""" Input
map A -ex dialog about
map <C-j> -ex dialog downloads
map <C-S-b> -js window.PlacesCommandHook.showPlacesOrganizer('AllBookmarks')
map s <C-c>
map <space> <C-d>
map <S-space> <C-u>
map <A-p> -ex pintab!
map <A-$> -ex tabmove $
map <C-$> g$
map <F1> <C-^>
set activate-=diverted,links,tabopen,paste
set complete=history,search
silent bmark -keyword ddg -t DDG https://duckduckgo.com/?q=%s
set defsearch=ddg
set newtab=help
set hintkeys=$.aoeupjxyidhtnmz

""" Display
highlight Hint -append font-size: 14px !important
map <A-t> -js content.document.toggleImageSize()
silent colorscheme solarized-light
set guioptions+=cNT
set scrollsteps=1
set showstatuslinks=command
set hlfind
set pageinfo=fgmse

""" Core
set editor='emacsclientw +<line> <file>'

""" Sites
map <C-S-n> -ex bmarks! -tags news
map S -ex bmark -keyword ac -t config about:config
   \ bmark -keyword bgp -t BGP http://bgp.he.net/search?search[search]=%s
   \ bmark -keyword v -t valsi http://vlasisku.lojban.org/?query=%s
   \ bmark -keyword yb -t youtube https://www.youtube.com/watch?v=%s
   \ bmark -keyword cw -t 'CrawlWiki' http://crawl.chaosforge.org/index.php?title=Special%3ASearch&search=%s
   \ bmark -keyword dw -t 'Dota 2 Wiki' http://dota2.gamepedia.com/index.php?title=Special%3ASearch&search=%s
   \ bmark -keyword dr -t 'Dota 2 Random' http://dota2.gamepedia.com/Special:Random
   \ bmark -keyword df -t 'Dota 2 fix' http://dev.dota2.com/showthread.php?t=28814
   \ bmark -keyword er -t 'POE Random' http://pathofexile.gamepedia.com/Special:Random
   \ bmark -keyword lp -t LP http://lparchive.org/search/%s#results
   \ bmark -keyword ix -t ix -post f:1=%s http://ix.io/
   \ bmark -keyword io -t ixopen http://ix.io/%s/
   \ bmark -keyword b -t btdigg https://btdigg.org/search?q=%s&order=0&p=0
   \ bmark -keyword ba -t btdigg https://btdigg.org/search?q=%s&order=2&p=0
   \ bmark -keyword tpb -t tpb https://thepiratebay.se/search/%s/0/3/0
   \ bmark -keyword mt -t metasearch http://metasearch.torrentproject.com/#!search=%s
   \ bmark -keyword lf -t last.fm http://www.last.fm/user/hdh0#recentTracks
   \ bmark -keyword m -t zing http://mp3.zing.vn/tim-kiem/bai-hat.html?q=%s
   \ bmark -keyword ma -t artist http://musicbrainz.org/search?advanced=1&type=artist&tport=8000&query=%s
   \ bmark -keyword mg -t group http://musicbrainz.org/search?advanced=1&type=release_group&tport=8000&query=%s
   \ bmark -keyword mr -t recording http://musicbrainz.org/search?advanced=1&type=recording&tport=8000&query=%s
   \ bmark -keyword ts -t 'tor address' https://atlas.torproject.org/#search/kub
   \ bmark -keyword gm -t gmail https://mail.google.com/mail/#inbox -tags news
   \ bmark -keyword fb -t facebook https://fb.me/%s -tags news
map <C-S-s> -ex set! accessibility.browsewithcaret_shortcut.enabled=false
   \ set! browser.newtabpage.enabled=false
   \ set! browser.privatebrowsing.dont_prompt_on_enter=true
   \ set! browser.sessionstore.restore_pinned_tabs_on_demand=true
   \ set! browser.shell.checkDefaultBrowser=false
   \ set! browser.startup.homepage=about:blank
   \ set! browser.startup.page=3
   \ set! general.warnOnAboutConfig=false
   \ set! security.warn_viewing_mixed=false
   \ set! layout.spellcheckDefault=0
   \ set! middlemouse.paste=true
   \ set! ui.key.contentAccess=4
   \ set! ui.key.menuAccessKey=0
   \ set! browser.anchor_color="#6c71c4"
   \ set! browser.display.background_color="#fdf6e3"
   \ set! browser.display.foreground_color="#657b83"
   \ set! browser.display.use_system_colors=false
   \ set! font.default.x-western="sans-serif"
   \ if /NT 6/.test(window.navigator.oscpu)
   \     set! font.name.monospace.x-western=Consolas
   \     set! font.name.sans-serif.x-western=Calibri
   \     set! font.name.serif.x-western=Cambria
   \ fi
   \ set! extensions.checkCompatibility.nightly=false
   \ extadd https://www.eff.org/files/https-everywhere-devel.xpi
   \ set! extensions.https_everywhere._observatory.alt_roots=true
   \ set! extensions.https_everywhere._observatory.enabled=true
   \ set! extensions.https_everywhere._observatory.priv_dns=true
   \ set! plugins.hide_infobar_for_missing_plugin=true
   \ set! browser.download.manager.alertOnEXEOpen=false
   \ set! browser.download.manager.scanWhenDone=false
   \ set! browser.search.context.loadInBackground=true
   \ set! intl.charset.default=UTF-8
   \ set! network.http.pipelining=true
   \ set! network.http.pipelining.aggressive=true
   \ set! network.http.pipelining.ssl=true
   \ set! network.http.spdy.enabled.http2draft=true
   \ set! network.protocol-handler.expose.magnet=false
   \ set! network.proxy.socks=kub.zahe.me
   \ set! network.proxy.socks_port=9050
   \ set! network.proxy.socks_remote_dns=true
   \ set! toolkit.telemetry.enabled=true
   \ js services.permissions.add(services.io.newURI("http:depositfiles.com",null,null), 'image', services.permissions.DENY_ACTION)
   \ js services.permissions.add(services.io.newURI("http:flecu.zahe.me",null,null), 'popup', services.permissions.ALLOW_ACTION)
   \ js services.loginManager.setLoginSavingEnabled("accounts.google.com", false)

" Set to 1 to proxy through tor network
map -count <C-A-p> -ex set! network.proxy.type=<count>

set pk+=smbc-comics.com:x
style -n "smbc red button" www.smbc-comics.com <<EOS
#aftercomic {
  display: block !important;
  position: static !important;
}
EOS

" thanks to Un-UTM Location Bar by Bruno BarÃ£o at https://www.userscripts.org/scripts/show/93825
" and dactyl by Kris Maglione with https://code.google.com/p/dactyl/source/detail?r=15b2632ff06e72e863d80fba5df9f3b037b94a06 for the code
autocmd DOMLoad (utm|wa)_ -js win.history.replaceState("Remove trackers", '', doc.location.href.replace(/&?(utm|wa)_[^&]+/g,'').replace(/\?$/,''))

set passkeys+=mail.google.com/mail/:'#!ms+-/? jknpu'

set passkeys+=flecu.zahe.me:'vjksUS'
style -n "selfoss" flecu.zahe.me <<EOS
.entry-content { -moz-column-count: 1 !important }
EOS

set passkeys+=tumblr.com:jk

style -n "visited" flecu.zahe.me,dota2lounge.com :visited { color: #859900 !important }
style -n "gif decor" * <<EOS
:-moz-any(
  [src*="imgur"]
, [src*="tumblr"]
, [src*="xkcd.com/comic"]
)[src$=".gif"] { border-right: 2px dotted #d33682 !important}
EOS
style -n "titled image decor" * <<EOS
img[title]:not(:-moz-any(
[title=""]
, [src*='buttersafe.com/']
, [src*='calmblueoceans.com/']
, [src*='chainsawsuit.com/']
, [src*='e-merl.com']
, [src*='endlessorigami.com/']
, [src*='everydayblues.net/']
, [src*='happletea.com/']
, [src*='hejibits.com/']
, [src*='hipsterhitler.com/']
, [src*='invisiblebread.com/']
, [src*='johnnywander.com/']
, [src*='lastplacecomics.com/']
, [src*='lunchbreath.com/']
, [src*='mimiandeunice.com/']
, [src*='neatorama.com/']
, [src*='nerfnow.com/']
, [src*='pandyland.net/']
, [src*='pbfcomics.com/']
, [src*='pidjin.net/']
, [src*='ribbonfarm.com/']
, [src*='robbieandbobby.com/']
, [src*='rockpapercynic.com/']
, [src*='satwcomic.com/']
, [src*='savagechickens.com/']
, [src*='shoeboxblog.com/']
, [src*='stupidfox.net/']
, [src*='tedmccagg.typepad.com/']
, [src*='terminally-incoherent.com/']
, [src*='thebadchemicals.com/']
, [src*='todayifoundout.com/']
, [src*='uncubedthecomic.com/']
, [src*='upup-downdown.com/']
, [src*='warehousecomic.com/']
))
{ outline: 2px dashed #6c71c4; outline-offset: 1px }
EOS
style -n "link decor: youtube-dl" * <<EOS
:-moz-any(
  [href*="blip.tv/"]
, [href*="collegehumor.com/video/"]
, [href*="dailymotion."][href*="/video/"]
, [href*="escapistmagazine.com/videos/view/"]
, [href*="infoq.com/"]
, [href*="mixcloud.com/"]
, [href*="mtv.com/videos/"]
, [href*="soundcloud.com/"]
, [href*="twitch.tv/"]
, [href*="viddler.com/"]
, [href*="video.google.com/"]
, [href*="vimeo.com/"]
, [href*="video.xnxx.com/video"]
, [href*="xvideos.com/video"]
, [href*="youku.com/v_show/"]
, [href*="youtu.be/"],[href*="youtube.com/watch?"]
)::after { content: "\21af" }
EOS
style -n "link decor: people" * <<EOS
:-moz-any(
  [href*="/~cks/"]
, [href*="advogato.org/person/apenwarr/"]
, [href*="alumnit.ca/~apenwarr/"]
, [href*="apenwarr.ca/"]
, [href*="aaronland.info/"]
, [href*="backofthecerealbox.com/"]
, [href*="betterexplained.com/"]
, [href*="//girtby.net/"]
, [href*="ignorethecode.net/"]
, [href*="johndcook.com/"]
, [href*="kidicarus222.blogspot.com/"]
, [href*="leancrew.com/"]
, [href*="/oldnewthing/archive/"]
, [href*="pixelbeat.org/"]
, [href*="//plasmasturm.org/"]
, [href*="plover.com/"]
, [href*="//prog21.dadgum.com/"]
, [href*="shamusyoung.com/"]
, [href*="terminally-incoherent.com/"]
)::after { content: "\22c6" }
EOS
style -n "link decor: WP" * [href*=".wikipedia.org/"]::before { content: url(https://en.wikipedia.org/favicon.ico) }

style -n "link decor: tvtropes" * <<EOS
[href*="tvtropes.org/"]::before { content: url(http://tvtropes.org/favicon.ico) }
@-moz-document domain("tvtropes.org") {
               [href*="tvtropes.org/"]::before { content: none }
}
EOS
style -n "tvtropes spoiler" tvtropes.org .spoiler { color: grey !important } .spoiler a { color: teal !important } a { text-decoration: underline !important }
